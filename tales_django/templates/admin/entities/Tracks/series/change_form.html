{% extends "admin/change_form.html" %}

{% load i18n admin_urls static admin_modify %}
{% load crispy_forms_tags %}

{% block form_bottom %}
    {{ block.super }}

    {% if track_assignment_form %}
        <div class="submit-row" style="margin-bottom: 20px; padding: 10px; background-color: #f8f8f8; border: 1px solid #ddd;">
            <h3 style="margin-top: 0; color: #333;">{% trans "Add Track to Series" %}</h3>
            <form method="post" action="{{ assign_tracks_url }}">
                {% csrf_token %}
                <div style="display: flex; align-items: center; gap: 10px;">
                    {{ track_assignment_form.select_track }}
                    <button type="submit" class="button" style="margin: 0;">{% trans "Add Track" %}</button>
                </div>
                {% if track_assignment_form.select_track.errors %}
                    <div style="color: red; margin-top: 5px;">
                        {{ track_assignment_form.select_track.errors }}
                    </div>
                {% endif %}
            </form>
        </div>
    {% endif %}
{% endblock %}
