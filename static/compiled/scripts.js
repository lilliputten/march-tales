(()=>{"use strict";var e,t={success:"bi-check",error:"bi-exclamation-triangle-fill",warn:"bi-bell-fill",info:"bi-info-lg"},r=new(function(){function e(){this.notifyRoot=void 0,this.timeoutDelay=3e3,this.inited=!1}return e.prototype.removeNotify=function(e){var t=this,r=e.node,o=e.handler;r.classList.remove("active"),o&&(clearTimeout(o),e.handler=void 0),setTimeout((function(){try{t.notifyRoot.removeChild(r)}catch(e){}}),250)},e.prototype.showNotify=function(e,r){var o,i=this;this.ensureInit(),r||(r=e,e="info"),o=r instanceof Error?function(e){if(e)return Array.isArray(e)?e.map(this.getErrorText.bind(this)).join("\n"):(e instanceof Error?e=e.message:"string"!=typeof e&&(e=String(e)),e)}(r):String(r);var n=document.createElement("div");n.classList.add("notify"),n.classList.add("notify-"+e);var a=document.createElement("span");a.classList.add("icon"),a.classList.add("bi"),a.classList.add(t[e]),n.appendChild(a);var s=document.createElement("div");s.classList.add("text"),s.innerHTML=o,n.appendChild(s),this.notifyRoot.appendChild(n),window.requestAnimationFrame((function(){setTimeout((function(){n.classList.add("active")}),10)}));var d={node:n,handler:void 0},c=this.removeNotify.bind(this,d);d.handler=setTimeout(c,this.timeoutDelay),n.addEventListener("mouseenter",(function(){clearTimeout(d.handler)})),n.addEventListener("mouseleave",(function(){d.handler=setTimeout(c,i.timeoutDelay)})),n.addEventListener("click",c)},e.prototype.showInfo=function(e){this.showNotify("info",e)},e.prototype.showSuccess=function(e){this.showNotify("success",e)},e.prototype.showWarn=function(e){this.showNotify("warn",e)},e.prototype.showError=function(e){this.showNotify("error",e)},e.prototype.showDemo=function(){this.showInfo("Info"),this.showSuccess("Success"),this.showWarn("Warn"),this.showError("Error")},e.prototype.ensureInit=function(){this.init()},e.prototype.createDomNode=function(){var e=document.body,t=document.createElement("div");t.classList.add("notify-root"),t.setAttribute("id","notify-root"),e.appendChild(t),this.notifyRoot=t},e.prototype.init=function(){this.inited||(this.createDomNode(),this.inited=!0)},e}()),o=document.body,i=void 0,n=void 0,a="true";function s(){var e=function(){if(!i){(i=document.createElement("div")).classList.add("shared-player");var e=document.createElement("audio");e.addEventListener("loadeddata",l),i.appendChild(e),o.appendChild(i)}return i}(),t=e.getElementsByTagName("audio")[0];if(!t)throw new Error("No audio node found");return t}function d(e){s().currentTime=0;var t=null==n?void 0:n.dataset;t&&delete t.status}function c(e){var t=null==n?void 0:n.querySelector(".time"),r=e.currentTarget.currentTime;if(t){var o=function(e){const t=e/1e3,r=t/60,o=r/60,i=[o/24,o%24,r%60,t%60].map(Math.floor).map(((e,t)=>{if(!(t<2)||e)return t>=1?String(e).padStart(2,"0"):t?void 0:String(e)+"d"}));return[i.shift(),i.filter(Boolean).join(":")].filter(Boolean).join(" ")}(Math.floor(1e3*r));t.innerHTML=o}null==n||n.dataset}function u(e){var t=null==n?void 0:n.dataset;t&&(t.status="playing")}function l(e){var t=s(),r=null==n?void 0:n.dataset;r&&(r.loaded=a,delete r.error),t.play()}function f(e){var t=e.currentTarget,o=t.src,i=t.type,a="Error loading audio file "+o,s=new Error(a);console.error("[sharedPlayerError]",a,{error:s,currentTrackPlayer:n,src:o,type:i,ev:e});debugger;r.showError(a);var d=null==n?void 0:n.dataset;d&&(d.error=a,delete d.loaded,delete d.status)}function h(e){var t=e.currentTarget,r=(t.closest(".track-controls"),t.closest(".track-player"));n&&n!==r&&function(){if(i){var e=i.getElementsByTagName("audio")[0];e&&function(e){return!!e&&e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}(e)&&(e.pause(),e.currentTime=0)}if(n){var t=n.dataset;delete t.status,delete t.loaded,delete t.error}}();var o=r.dataset,a="playing"===o.status,h="waiting"===o.status,p=!!o.loaded,v=!h&&!a,y=s();if(a)y.pause(),o.status="paused";else if(v)if(n=r,p)o.status="playing",y.play();else{o.status="waiting",delete o.loaded,delete o.error;var m=function(e){void 0===e&&(e={});for(var t=s(),r=0,o=Array.from(t.getElementsByTagName("source"));r<o.length;r++)o[r].remove();t.setAttribute("preload","auto");var i=document.createElement("source");return i.setAttribute("type",e.type||"audio/mpeg"),e.src&&i.setAttribute("src",e.src),t.addEventListener("loadeddata",l),t.addEventListener("playing",u),t.addEventListener("timeupdate",c),t.addEventListener("ended",d),i.addEventListener("error",f),t.appendChild(i),i}({src:o.trackMediaUrl});if(!m)throw new Error("No audio source node found");y.load()}}function p(e){var t=e.dataset,r=t.inited,o=t.trackMediaUrl;!r&&o&&(e.querySelector(".track-controls .track-control-play").addEventListener("click",h),t.inited=a)}void 0===e&&(e=document.body),e.querySelectorAll(".track-player[data-track-media-url]").forEach(p)})();
//# sourceMappingURL=scripts.js.map